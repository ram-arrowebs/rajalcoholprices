<!DOCTYPE html>
<html lang="en"><head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="”Pragma”" content="”no-cache”">
    <meta http-equiv="”Expires”" content="”-1″">
    <meta http-equiv="”CACHE-CONTROL”" content="”NO-CACHE”">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Alcohol Price List - Rajasthan, India</title>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.0.1/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.0/css/dataTables.bootstrap5.min.css">
  </head>

  <body>
    <div id="root" style="padding:0.5rem 1rem;">
        <!-- let's bring the table here -->
        <table id="rajprice" class="table table-striped table-hover" style="width:100%">
            <thead>
                <tr>
                    <th>Item</th>
                    <th>Packing</th>
                    <th class="dt-right">Price</th>
                </tr>
            </thead>
        </table>
        <div id="lastupdate" class="lastupdate"></div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.11.0/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.11.0/js/dataTables.bootstrap5.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.1/papaparse.min.js" integrity="sha512-EbdJQSugx0nVWrtyK3JdQQ/03mS3Q1UiAhRtErbwl1YL/+e2hZdlIcSURxxh7WXHTzn83sjlh2rysACoJGfb6g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script type="text/javascript">
        var govdata    = "https://docs.google.com/spreadsheets/d/1-4Wuz9_s0cLb1KLFt3f4q6LHrFPH1BALb67L88vbIW8/gviz/tq?tqx=out:csv&sheet=data&range=B2:D";
        var lastupdate = "https://docs.google.com/spreadsheets/d/1-4Wuz9_s0cLb1KLFt3f4q6LHrFPH1BALb67L88vbIW8/gviz/tq?tqx=out:csv&sheet=lastupdate&range=A1";
        $(document).ready(function() {
            // The primary table
            Papa.parse(govdata, {
                download: true,
                complete: function(results) {           
                    feedDataTable(results.data);
                }
            });
            // The last updated date
            Papa.parse(lastupdate, {
                download: true,
                complete: function(results) {
                    $("#lastupdate").html(results.data);
                }
            });
        } );

        function feedDataTable(dataSet) {
            $('#rajprice').DataTable({
                "data": dataSet,
                "pageLength": 50,
                "columns": [
                  null,
                  null,
                  { className: "dt-right" }
                ],
                "lengthChange": false
            });
        }
    </script>
  </body>
</html>